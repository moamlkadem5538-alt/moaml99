<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>قاعدة بيانات المدرسين - ثانوية المتفوقين والمتفوقات</title>
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: "Cairo", "Tahoma", sans-serif;
      background: linear-gradient(135deg, #e3f2fd, #ffffff);
      direction: rtl;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    nav {
      background: #2c3e50;
      color: white;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    nav .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 20px;
      font-weight: bold;
      font-family: 'Amiri', serif;
    }
    nav .logo img {
      height: 45px;
      width: 45px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid white;
      transition: transform 0.3s;
    }
    nav .logo img:hover {
      transform: scale(1.1) rotate(5deg);
    }
    nav ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: 20px;
    }
    nav ul li a {
      color: white;
      text-decoration: none;
      font-size: 15px;
      transition: 0.3s;
    }
    nav ul li a:hover {
      color: #f1c40f;
    }
    header {
      background: #3498db;
      color: white;
      padding: 15px;
      border-radius: 0 0 12px 12px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    header h1 {
      margin: 0;
      font-size: 26px;
    }
    header p {
      margin: 5px 0 0;
      font-size: 18px;
      font-family: 'Amiri', serif;
    }
    form {
      background: white;
      padding: 20px;
      margin: 20px auto;
      width: 90%;
      max-width: 600px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    form input, form select, form button {
      margin: 8px 0;
      padding: 10px;
      width: 100%;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    form button {
      background: #27ae60;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    form button:hover {
      background: #2ecc71;
    }
    #search {
      width: 90%;
      max-width: 600px;
      margin: 10px auto;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      display: block;
    }
    table {
      width: 90%;
      margin: 20px auto;
      border-collapse: collapse;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    table th, table td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    table th {
      background: #3498db;
      color: white;
    }
    .actions button {
      margin: 2px;
      padding: 5px 10px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .edit { background: #f39c12; color: white; }
    .delete { background: #e74c3c; color: white; }
    #exportBtn, #exportPdfBtn {
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 20px;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      transition: 0.3s;
    }
    #exportBtn {
      background: #2980b9;
      color: white;
    }
    #exportBtn:hover { background: #3498db; }
    #exportPdfBtn {
      background: #c0392b;
      color: white;
      margin-left: 10px;
    }
    #exportPdfBtn:hover { background: #e74c3c; }
  </style>
</head>
<body>

  <nav>
    <div class="logo">
      <img src="logo.png" alt="شعار المدرسة">
      <span>ثانوية المتفوقين والمتفوقات</span>
    </div>
    <ul>
      <li><a href="#">الرئيسية</a></li>
      <li><a href="#teachersTable">المدرسين</a></li>
    </ul>
  </nav>

  <header>
    <h1>قاعدة بيانات المدرسين</h1>
    <p>تصميم: مؤمل كاظم المحمداوي</p>
  </header>

  <form id="teacherForm">
    <input type="text" id="name" placeholder="اسم المدرس" required>
    <input type="number" id="age" placeholder="العمر" min="1" required>
    <input type="text" id="degree" placeholder="التحصيل الدراسي" required>
    <input type="text" id="subject" placeholder="المادة" required>
    <input type="number" id="lessons" placeholder="عدد الحصص في الأسبوع" min="1" required>
    <button type="submit">حفظ / إضافة مدرس</button>
  </form>

  <input type="text" id="search" placeholder="بحث بالاسم أو المادة...">

  <button id="exportBtn">تحميل البيانات Excel</button>
  <button id="exportPdfBtn">تحميل البيانات PDF</button>

  <table id="teachersTable">
    <thead>
      <tr>
        <th>الاسم</th>
        <th>العمر</th>
        <th>التحصيل الدراسي</th>
        <th>المادة</th>
        <th>عدد الحصص</th>
        <th>إجراءات</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- مكتبة jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <script>
    const form = document.getElementById('teacherForm');
    const tableBody = document.querySelector('#teachersTable tbody');
    const searchInput = document.getElementById('search');
    const exportBtn = document.getElementById('exportBtn');
    const exportPdfBtn = document.getElementById('exportPdfBtn');

    let teachers = JSON.parse(localStorage.getItem('teachers')) || [];
    let editIndex = -1;

    function renderTable(filter = "") {
      tableBody.innerHTML = "";
      teachers.forEach((teacher, index) => {
        if(teacher.name.includes(filter) || teacher.subject.includes(filter)) {
          const row = `<tr>
            <td>${teacher.name}</td>
            <td>${teacher.age}</td>
            <td>${teacher.degree}</td>
            <td>${teacher.subject}</td>
            <td>${teacher.lessons}</td>
            <td class="actions">
              <button class="edit" onclick="editTeacher(${index})">تعديل</button>
              <button class="delete" onclick="deleteTeacher(${index})">حذف</button>
            </td>
          </tr>`;
          tableBody.innerHTML += row;
        }
      });
    }

    function saveData() {
      localStorage.setItem('teachers', JSON.stringify(teachers));
    }

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      const teacher = {
        name: document.getElementById('name').value.trim(),
        age: document.getElementById('age').value,
        degree: document.getElementById('degree').value.trim(),
        subject: document.getElementById('subject').value.trim(),
        lessons: document.getElementById('lessons').value,
      };
      if(editIndex === -1) {
        teachers.push(teacher);
      } else {
        teachers[editIndex] = teacher;
        editIndex = -1;
      }
      renderTable(searchInput.value.trim());
      saveData();
      form.reset();
    });

    function deleteTeacher(index) {
      if(confirm("هل أنت متأكد من حذف هذا المدرس؟")) {
        teachers.splice(index, 1);
        renderTable(searchInput.value.trim());
        saveData();
      }
    }

    function editTeacher(index) {
      const t = teachers[index];
      document.getElementById('name').value = t.name;
      document.getElementById('age').value = t.age;
      document.getElementById('degree').value = t.degree;
      document.getElementById('subject').value = t.subject;
      document.getElementById('lessons').value = t.lessons;
      editIndex = index;
      window.scrollTo({top:0, behavior:'smooth'});
    }

    searchInput.addEventListener('input', function() {
      renderTable(this.value.trim());
    });

    exportBtn.addEventListener('click', function() {
      let csvContent = "data:text/csv;charset=utf-8," 
        + ["الاسم,العمر,التحصيل الدراسي,المادة,عدد الحصص"]
        .concat(teachers.map(t => [t.name,t.age,t.degree,t.subject,t.lessons].join(",")))
        .join("\n");
      const encodedUri = encodeURI(csvContent);
      const link = document.createElement("a");
      link.setAttribute("href", encodedUri);
      link.setAttribute("download", "teachers_data.csv");
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    });

    exportPdfBtn.addEventListener('click', function() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const columns = ["الاسم", "العمر", "التحصيل الدراسي", "المادة", "عدد الحصص"];
      const rows = teachers.map(t => [t.name, t.age, t.degree, t.subject, t.lessons]);
      doc.autoTable({
        head: [columns],
        body: rows,
        styles: { halign: 'center', fontSize: 10 },
        headStyles: { fillColor: [52, 152, 219], textColor: 255 },
      });
      doc.save("teachers_data.pdf");
    });

    renderTable();
  </script>

</body>
</html>